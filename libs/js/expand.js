(function(e){e.fn.expandAll=function(t){var n=e.extend({},e.fn.expandAll.defaults,t);return this.each(function(t){function d(t){for(var n=0,r=arguments.length;n<r;n++){var i=arguments[n],s=e(i);if(s.scrollTop()>0){return i}else{s.scrollTop(1);var o=s.scrollTop()>0;s.scrollTop(0);if(o){return i}}}return[]}var r=e(this),i,s,u,a,f,l,c;n.switchPosition=="before"?(e.fn.findSibling=e.fn.prev,e.fn.insrt=e.fn.before):(e.fn.findSibling=e.fn.next,e.fn.insrt=e.fn.after);if(this.id.length){f="#"+this.id}else if(this.className.length){f=this.tagName.toLowerCase()+"."+this.className.split(" ").join(".")}else{f=this.tagName.toLowerCase()}if(n.ref&&r.find(n.ref).length){n.switchPosition=="before"?i=r.find("'"+n.ref+":first'"):i=r.find("'"+n.ref+":last'")}else{return}if(n.cllpsLength&&r.closest(f).find(n.cllpsEl).text().length<n.cllpsLength){r.closest(f).find(n.cllpsEl).addClass("dont_touch");return}n.initTxt=="show"?(l=n.expTxt,c=""):(l=n.cllpsTxt,c="open");if(n.state=="hidden"){r.find(n.cllpsEl+":not(.shown, .dont_touch)").hide().findSibling().find("> a.open").removeClass("open").data("state",0)}else{r.find(n.cllpsEl).show().findSibling().find("> a").addClass("open").data("state",1)}n.oneSwitch?i.insrt('<p class="switch"><a href="#" class="'+c+'">'+l+"</a></p>"):i.insrt('<p class="switch"><a href="#" class="">'+n.expTxt+'</a> | <a href="#" class="open">'+n.cllpsTxt+"</a></p>");s=i.findSibling("p").find("a");u=r.closest(f).find(n.cllpsEl).not(".dont_touch");a=n.trigger?r.closest(f).find(n.trigger+" > a"):r.closest(f).find(".expand > a");if(n.child){r.find(n.cllpsEl+".shown").show().findSibling().find("> a").addClass("open").text(n.cllpsTxt);window.$vrbls={kt1:n.expTxt,kt2:n.cllpsTxt}}var h;typeof d=="function"?h=d("html","body"):h="html, body";s.click(function(){var t=e(this),r=t.closest(f).find(n.cllpsEl+":first"),i=r.offset().top-n.offset;if(n.parent){var s=t.parent().nextAll().children("p.switch").find("a");kidTxt1=$vrbls.kt1,kidTxt2=$vrbls.kt2,kidTxt=t.text()==n.expTxt?kidTxt2:kidTxt1;s.text(kidTxt);if(t.text()==n.expTxt){s.addClass("open")}else{s.removeClass("open")}}if(t.text()==n.expTxt){if(n.oneSwitch){t.text(n.cllpsTxt).attr("class","open")}a.addClass("open").data("state",1);u[n.showMethod](n.speed)}else{if(n.oneSwitch){t.text(n.expTxt).attr("class","")}a.removeClass("open").data("state",0);if(n.speed==0||n.instantHide){u.hide()}else{u[n.hideMethod](n.speed)}if(n.scroll&&i<e(window).scrollTop()){e(h).animate({scrollTop:i},600)}}return false});if(n.localLinks){var p=e(f).find(n.localLinks);if(p.length){e(p).click(function(){var t=e(this.hash);t=t.length&&t||e("[name="+this.hash.slice(1)+"]");if(t.length){var n=t.offset().top;e(h).animate({scrollTop:n},600);return false}})}}})};e.fn.expandAll.defaults={state:"hidden",initTxt:"show",expTxt:"[Expand All]",cllpsTxt:"[Collapse All]",oneSwitch:true,ref:".expand",switchPosition:"before",scroll:false,offset:20,showMethod:"slideDown",hideMethod:"slideUp",speed:600,cllpsEl:"#post-right .widget-inside",trigger:"#post-right .widget-action",localLinks:null,parent:false,child:false,cllpsLength:null,instantHide:false};e.fn.toggler=function(t){var n=e.extend({},e.fn.toggler.defaults,t);var r=e(this);r.wrapInner('<a style="display:block" href="#" title="Expand/Collapse" />');if(n.initShow){e(n.initShow).addClass("shown")}r.next(n.cllpsEl+":not(.shown)").hide();return this.each(function(){var t;n.container?t=n.container:t="html";if(r.next("div.shown").length){r.closest(t).find(".shown").show().prev().find("a").addClass("open")}e(this).click(function(){e(this).find("a").toggleClass("open").end().next(n.cllpsEl)[n.method](n.speed);return false})})};e.fn.toggler.defaults={cllpsEl:"#post-right div.widget-inside",method:"slideToggle",speed:"slow",container:"",initShow:".shown"};e.fn.fadeToggle=function(e,t){return this.animate({opacity:"toggle"},e,function(){if(jQuery.browser.msie){this.style.removeAttribute("filter")}if(jQuery.isFunction(t)){t()}})};e.fn.slideFadeToggle=function(e,t,n){return this.animate({opacity:"toggle",height:"toggle"},e,t,function(){if(jQuery.browser.msie){this.style.removeAttribute("filter")}if(jQuery.isFunction(n)){n()}})};e.fn.slideFadeDown=function(e,t){return this.animate({opacity:"show",height:"show"},e,function(){if(jQuery.browser.msie){this.style.removeAttribute("filter")}if(jQuery.isFunction(t)){t()}})};e.fn.slideFadeUp=function(e,t){return this.animate({opacity:"hide",height:"hide"},e,function(){if(jQuery.browser.msie){this.style.removeAttribute("filter")}if(jQuery.isFunction(t)){t()}})}})(jQuery)